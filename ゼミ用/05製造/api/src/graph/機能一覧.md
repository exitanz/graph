# 機能一覧
- 新規登録、ログイン、ログイン確認、パスワード変更はログインなしでアクセス可能
- 更新系は楽観排他制御を行う
    - 各テーブルにバージョンを持たせ、バージョンをカウントアップしていくことで排他制御とする
    - バージョンがDBと一致しない場合、更新処理は行わない

-----------------------------------------------------------

目次
- [機能一覧](#機能一覧)
- [新規登録](#新規登録)
    - [ファイル名](#ファイル名)
    - [メソッド](#メソッド)
    - [リクエストパラメータ](#リクエストパラメータ)
    - [処理内容](#処理内容)
    - [返却値](#返却値)
- [ログイン](#ログイン)
    - [ファイル名](#ファイル名-1)
    - [メソッド](#メソッド-1)
    - [リクエストパラメータ](#リクエストパラメータ-1)
    - [処理内容](#処理内容-1)
    - [返却値](#返却値-1)
- [ログイン確認](#ログイン確認)
    - [ファイル名](#ファイル名-2)
    - [メソッド](#メソッド-2)
    - [リクエストパラメータ](#リクエストパラメータ-2)
    - [処理内容](#処理内容-2)
    - [返却値](#返却値-2)
- [ログアウト](#ログアウト)
    - [ファイル名](#ファイル名-3)
    - [メソッド](#メソッド-3)
    - [リクエストパラメータ](#リクエストパラメータ-3)
    - [処理内容](#処理内容-3)
    - [返却値](#返却値-3)
- [登場人物登録](#登場人物登録)
    - [ファイル名](#ファイル名-4)
    - [メソッド](#メソッド-4)
    - [リクエストパラメータ](#リクエストパラメータ-4)
    - [処理内容](#処理内容-4)
    - [返却値](#返却値-4)
- [登場人物検索](#登場人物検索)
    - [ファイル名](#ファイル名-5)
    - [メソッド](#メソッド-5)
    - [リクエストパラメータ](#リクエストパラメータ-5)
    - [処理内容](#処理内容-5)
    - [返却値](#返却値-5)
- [登場人物編集](#登場人物編集)
    - [ファイル名](#ファイル名-6)
    - [メソッド](#メソッド-6)
    - [リクエストパラメータ](#リクエストパラメータ-6)
    - [処理内容](#処理内容-6)
    - [返却値](#返却値-6)
- [登場人物削除](#登場人物削除)
    - [ファイル名](#ファイル名-7)
    - [メソッド](#メソッド-7)
    - [リクエストパラメータ](#リクエストパラメータ-7)
    - [処理内容](#処理内容-7)
    - [返却値](#返却値-7)
- [時系列検索](#時系列検索)
    - [ファイル名](#ファイル名-8)
    - [メソッド](#メソッド-8)
    - [リクエストパラメータ](#リクエストパラメータ-8)
    - [処理内容](#処理内容-8)
    - [返却値](#返却値-8)
- [時系列登録](#時系列登録)
    - [ファイル名](#ファイル名-9)
    - [メソッド](#メソッド-9)
    - [リクエストパラメータ](#リクエストパラメータ-9)
    - [処理内容](#処理内容-9)
    - [返却値](#返却値-9)
- [時系列編集](#時系列編集)
    - [ファイル名](#ファイル名-10)
    - [メソッド](#メソッド-10)
    - [リクエストパラメータ](#リクエストパラメータ-10)
    - [処理内容](#処理内容-10)
    - [返却値](#返却値-10)
- [時系列削除](#時系列削除)
    - [ファイル名](#ファイル名-11)
    - [メソッド](#メソッド-11)
    - [リクエストパラメータ](#リクエストパラメータ-11)
    - [処理内容](#処理内容-11)
    - [返却値](#返却値-11)
- [関係検索](#関係検索)
    - [ファイル名](#ファイル名-12)
    - [メソッド](#メソッド-12)
    - [リクエストパラメータ](#リクエストパラメータ-12)
    - [処理内容](#処理内容-12)
    - [返却値](#返却値-12)
- [関係登録](#関係登録)
    - [ファイル名](#ファイル名-13)
    - [メソッド](#メソッド-13)
    - [リクエストパラメータ](#リクエストパラメータ-13)
    - [処理内容](#処理内容-13)
    - [返却値](#返却値-13)
- [関係編集](#関係編集)
    - [ファイル名](#ファイル名-14)
    - [メソッド](#メソッド-14)
    - [リクエストパラメータ](#リクエストパラメータ-14)
    - [処理内容](#処理内容-14)
    - [返却値](#返却値-14)
- [関係削除](#関係削除)
    - [ファイル名](#ファイル名-15)
    - [メソッド](#メソッド-15)
    - [リクエストパラメータ](#リクエストパラメータ-15)
    - [処理内容](#処理内容-15)
    - [返却値](#返却値-15)
- [関係性検索](#関係性検索)
    - [ファイル名](#ファイル名-16)
    - [メソッド](#メソッド-16)
    - [リクエストパラメータ](#リクエストパラメータ-16)
    - [処理内容](#処理内容-16)
    - [返却値](#返却値-16)
- [関係性登録](#関係性登録)
    - [ファイル名](#ファイル名-17)
    - [メソッド](#メソッド-17)
    - [リクエストパラメータ](#リクエストパラメータ-17)
    - [処理内容](#処理内容-17)
    - [返却値](#返却値-17)
- [関係性編集](#関係性編集)
    - [ファイル名](#ファイル名-18)
    - [メソッド](#メソッド-18)
    - [リクエストパラメータ](#リクエストパラメータ-18)
    - [処理内容](#処理内容-18)
    - [返却値](#返却値-18)
- [関係性削除](#関係性削除)
    - [ファイル名](#ファイル名-19)
    - [メソッド](#メソッド-19)
    - [リクエストパラメータ](#リクエストパラメータ-19)
    - [処理内容](#処理内容-19)
    - [返却値](#返却値-19)
- [グループ検索](#グループ検索)
    - [ファイル名](#ファイル名-20)
    - [メソッド](#メソッド-20)
    - [リクエストパラメータ](#リクエストパラメータ-20)
    - [処理内容](#処理内容-20)
    - [返却値](#返却値-20)
- [グループ登録](#グループ登録)
    - [ファイル名](#ファイル名-21)
    - [メソッド](#メソッド-21)
    - [リクエストパラメータ](#リクエストパラメータ-21)
    - [処理内容](#処理内容-21)
    - [返却値](#返却値-21)
- [グループ編集](#グループ編集)
    - [ファイル名](#ファイル名-22)
    - [メソッド](#メソッド-22)
    - [リクエストパラメータ](#リクエストパラメータ-22)
    - [処理内容](#処理内容-22)
    - [返却値](#返却値-22)
- [グループ削除](#グループ削除)
    - [ファイル名](#ファイル名-23)
    - [メソッド](#メソッド-23)
    - [リクエストパラメータ](#リクエストパラメータ-23)
    - [処理内容](#処理内容-23)
    - [返却値](#返却値-23)
- [作品全検索](#作品全検索)
    - [ファイル名](#ファイル名-24)
    - [メソッド](#メソッド-24)
    - [リクエストパラメータ](#リクエストパラメータ-24)
    - [処理内容](#処理内容-24)
    - [返却値](#返却値-24)
- [作品検索](#作品検索)
    - [ファイル名](#ファイル名-25)
    - [メソッド](#メソッド-25)
    - [リクエストパラメータ](#リクエストパラメータ-25)
    - [処理内容](#処理内容-25)
    - [返却値](#返却値-25)
- [作品登録](#作品登録)
    - [ファイル名](#ファイル名-26)
    - [メソッド](#メソッド-26)
    - [リクエストパラメータ](#リクエストパラメータ-26)
    - [処理内容](#処理内容-26)
    - [返却値](#返却値-26)
- [作品編集](#作品編集)
    - [ファイル名](#ファイル名-27)
    - [メソッド](#メソッド-27)
    - [リクエストパラメータ](#リクエストパラメータ-27)
    - [処理内容](#処理内容-27)
    - [返却値](#返却値-27)
- [作品削除](#作品削除)
    - [ファイル名](#ファイル名-28)
    - [メソッド](#メソッド-28)
    - [リクエストパラメータ](#リクエストパラメータ-28)
    - [処理内容](#処理内容-28)
    - [返却値](#返却値-28)
- [ユーザ編集](#ユーザ編集)
    - [ファイル名](#ファイル名-29)
    - [メソッド](#メソッド-29)
    - [リクエストパラメータ](#リクエストパラメータ-29)
    - [処理内容](#処理内容-29)
    - [返却値](#返却値-29)
- [ユーザ削除](#ユーザ削除)
    - [ファイル名](#ファイル名-30)
    - [メソッド](#メソッド-30)
    - [リクエストパラメータ](#リクエストパラメータ-30)
    - [処理内容](#処理内容-30)
    - [返却値](#返却値-30)
- [グラフ検索](#グラフ検索)
    - [ファイル名](#ファイル名-31)
    - [メソッド](#メソッド-31)
    - [リクエストパラメータ](#リクエストパラメータ-31)
    - [処理内容](#処理内容-31)
    - [返却値](#返却値-31)
- [グラフ登録](#グラフ登録)
    - [ファイル名](#ファイル名-32)
    - [メソッド](#メソッド-32)
    - [リクエストパラメータ](#リクエストパラメータ-32)
    - [処理内容](#処理内容-32)
    - [返却値](#返却値-32)


-----------------------------------------------------------

# 新規登録

### ファイル名
- CreateAccountControler.php

### メソッド
- POST

### リクエストパラメータ
- ユーザ名 ※
- パスワード ※

### 処理内容
ユーザIDを発行し、パスワードを暗号化してDBに登録する（結果コード：000）

### 返却値
- 結果コード
- メッセージ

-----------------------------------------------------------

# ログイン

### ファイル名
- LoginControler.php

### メソッド
- POST

### リクエストパラメータ
- ユーザID ※
- パスワード ※

### 処理内容
ユーザIDからユーザ情報を検索し、パスワードが一致するか確認する
パスワードが一致：ログイン成功（結果コード：000）
パスワードが不一致：ログイン成功（結果コード：102）

### 返却値
- 結果コード
- メッセージ
- オプション
    - ユーザID
    - ユーザ名
    - パスワード
    - バージョン

-----------------------------------------------------------

# ログイン確認

### ファイル名
- CommonLoginControler.php

### メソッド
- POST

### リクエストパラメータ
- ユーザID ※
- パスワード ※

### 処理内容
ユーザIDからユーザ情報を検索し、パスワードが一致するか確認する
パスワードが一致：ログイン成功（結果コード：000）
パスワードが不一致：ログイン成功（結果コード：102）

### 返却値
- 結果コード
- メッセージ
- オプション
    - ログイン状態

-----------------------------------------------------------

# ログアウト

### ファイル名
- LogoutControler.php

### メソッド
- GET

### リクエストパラメータ
- なし

### 処理内容
ユーザ情報を破棄してログアウトする
ログアウト成功（結果コード：000）

### 返却値
- 結果コード
- メッセージ

-----------------------------------------------------------

# 登場人物登録

### ファイル名
- CreateActorControler.php

### メソッド
- POST

### リクエストパラメータ
- 登場人物名 ※
- 説明
- 画像
- 作品ID ※
- 時系列ID ※
- グループID ※
- ユーザID ※

### 処理内容
登場人物IDを発行し、DBに登録する（結果コード：000）

### 返却値
- 結果コード
- メッセージ

-----------------------------------------------------------

# 登場人物検索

### ファイル名
- SearchActorControler.php

### メソッド
- GET

### リクエストパラメータ
- 登場人物ID
- 登場人物名
- 説明
- 作品ID ※
- 時系列ID
- グループID
- ユーザID ※

### 処理内容
作品ID、時系列ID、グループID、ユーザIDから
登場人物情報を検索する（結果コード：000）
登場人物ID、登場人物名、説明から登場人物情報の
絞り込みができる
※ NULL値は絞り込まない

### 返却値
- 結果コード
- メッセージ
- オプション
    - 登場人物情報リスト

-----------------------------------------------------------

# 登場人物編集

### ファイル名
- EditActorControler.php

### メソッド
- PUT

### リクエストパラメータ
- 登場人物ID ※
- 登場人物名
- 説明
- 画像
- 作品ID
- 時系列ID
- グループID
- ユーザID ※
- バージョン ※

### 処理内容
登場人物IDとバージョンが一致する登場人物情報を入力内容に変更する（結果コード：000）
※ NULL値は変更しない

### 返却値
- 結果コード
- メッセージ

-----------------------------------------------------------

# 登場人物削除

### ファイル名
- DeleteActorControler.php

### メソッド
- DELETE

### リクエストパラメータ
- 登場人物ID ※
- ユーザID ※
- バージョン ※

### 処理内容
登場人物IDを使用している関係情報を削除する。
登場人物IDとバージョンが一致する登場人物情報を削除する（結果コード：000）

### 返却値
- 結果コード
- メッセージ

-----------------------------------------------------------

# 時系列検索

### ファイル名
- SearchTimeControler.php

### メソッド
- GET

### リクエストパラメータ
- 時系列ID
- 時系列名
- 作品ID ※
- ユーザID ※

### 処理内容
作品ID、ユーザIDから時系列情報を検索する（結果コード：000）
時系列ID、時系列名から時系列情報の絞り込みができる
※ NULL値は絞り込まない

### 返却値
- 結果コード
- メッセージ
- オプション
    - 時系列情報リスト

-----------------------------------------------------------

# 時系列登録

### ファイル名
- CreateTimeControler.php

### メソッド
- POST

### リクエストパラメータ
- 時系列名 ※
- 作品ID ※
- ユーザID ※

### 処理内容
時系列IDを発行し、DBに登録する（結果コード：000）

### 返却値
- 結果コード
- メッセージ

-----------------------------------------------------------

# 時系列編集

### ファイル名
- EditTimeControler.php

### メソッド
- PUT

### リクエストパラメータ
- 時系列ID ※
- 時系列名
- 作品ID ※
- ユーザID ※
- バージョン ※

### 処理内容
時系列IDとバージョンが一致する時系列情報を入力内容に変更する（結果コード：000）
※ NULL値は変更しない

### 返却値
- 結果コード
- メッセージ

-----------------------------------------------------------

# 時系列削除

### ファイル名
- DeleteTimeControler.php

### メソッド
- DELETE

### リクエストパラメータ
- 時系列ID ※
- 作品ID ※
- ユーザID ※
- バージョン ※

### 処理内容
時系列IDを使用している関係情報を削除する。
時系列IDを使用している登場人物情報を削除する。
時系列IDを使用しているグループ情報を削除する。
時系列IDとバージョンが一致する時系列情報を削除する（結果コード：000）

### 返却値
- 結果コード
- メッセージ

-----------------------------------------------------------


# 関係検索

### ファイル名
- SearchRelControler.php

### メソッド
- GET

### リクエストパラメータ
- 関係ID
- 関係性ID
- 関係詳細
- 登場人物ID
- 対象ID
- 作品ID ※
- 時系列ID ※
- ユーザID ※

### 処理内容
作品ID、時系列ID、ユーザIDから関係情報を検索する（結果コード：000）
関係ID、関係性ID、関係詳細、登場人物ID、対象IDから関係情報の絞り込みができる
※ NULL値は絞り込まない

### 返却値
- 結果コード
- メッセージ
- オプション
    - 関係情報リスト

-----------------------------------------------------------

# 関係登録

### ファイル名
- CreateRelControler.php

### メソッド
- POST

### リクエストパラメータ
- 関係性ID ※
- 関係詳細
- 登場人物ID ※
- 対象ID ※
- 作品ID ※
- 時系列ID ※
- ユーザID ※

### 処理内容
関係IDを発行し、DBに登録する（結果コード：000）

### 返却値
- 結果コード
- メッセージ

-----------------------------------------------------------

# 関係編集

### ファイル名
- EditRelControler.php

### メソッド
- PUT

### リクエストパラメータ
- 関係ID ※
- 関係性ID
- 関係詳細
- 登場人物ID
- 対象ID
- 作品ID ※
- 時系列ID ※
- ユーザID ※
- バージョン ※

### 処理内容
関係IDとバージョンが一致する関係情報を入力内容に変更する（結果コード：000）
※ NULL値は変更しない

### 返却値
- 結果コード
- メッセージ

-----------------------------------------------------------

# 関係削除

### ファイル名
- DeleteRelControler.php

### メソッド
- DELETE

### リクエストパラメータ
- 関係ID ※
- 作品ID ※
- ユーザID ※
- バージョン ※

### 処理内容
関係IDとバージョンが一致する関係情報を削除する（結果コード：000）

### 返却値
- 結果コード
- メッセージ

-----------------------------------------------------------


# 関係性検索

### ファイル名
- SearchRelMstControler.php

### メソッド
- GET

### リクエストパラメータ
- 関係性ID
- 関係性名
- 作品ID ※
- ユーザID ※

### 処理内容
作品ID、ユーザIDから関係性情報を検索する（結果コード：000）
関係性ID、関係性名から関係性情報の絞り込みができる
※ NULL値は絞り込まない

### 返却値
- 結果コード
- メッセージ
- オプション
    - 関係性情報リスト

-----------------------------------------------------------

# 関係性登録

### ファイル名
- CreateRelMstControler.php

### メソッド
- POST

### リクエストパラメータ
- 関係性名
- 作品ID ※
- ユーザID ※

### 処理内容
関係性IDを発行し、DBに登録する（結果コード：000）

### 返却値
- 結果コード
- メッセージ

-----------------------------------------------------------

# 関係性編集

### ファイル名
- EditRelMstControler.php

### メソッド
- PUT

### リクエストパラメータ
- 関係性ID ※
- 関係性名
- 作品ID ※
- ユーザID ※
- バージョン ※

### 処理内容
関係性IDとバージョンが一致する関係性情報を入力内容に変更する（結果コード：000）
※ NULL値は変更しない

### 返却値
- 結果コード
- メッセージ

-----------------------------------------------------------

# 関係性削除

### ファイル名
- DeleteRelMstControler.php

### メソッド
- DELETE

### リクエストパラメータ
- 関係性ID ※
- 作品ID ※
- ユーザID ※
- バージョン ※

### 処理内容
関係性IDを使用している関係情報を削除する。
関係性IDとバージョンが一致する関係性情報を削除する（結果コード：000）

### 返却値
- 結果コード
- メッセージ

-----------------------------------------------------------

# グループ検索

### ファイル名
- SearchGroupControler.php

### メソッド
- GET

### リクエストパラメータ
- グループID
- グループ名
- 詳細
- 作品ID ※
- 時系列ID ※
- ユーザID ※

### 処理内容
作品ID、時系列ID、ユーザIDからグループ情報を検索する（結果コード：000）
グループID、グループ名、詳細からグループ情報の絞り込みができる
※ NULL値は絞り込まない

### 返却値
- 結果コード
- メッセージ
- オプション
    - グループ情報リスト

-----------------------------------------------------------

# グループ登録

### ファイル名
- CreateGroupControler.php

### メソッド
- POST

### リクエストパラメータ
- グループ名
- 詳細
- グループ色 ※
- 作品ID ※
- 時系列ID ※
- ユーザID ※

### 処理内容
グループIDを発行し、DBに登録する（結果コード：000）

### 返却値
- 結果コード
- メッセージ

-----------------------------------------------------------

# グループ編集

### ファイル名
- EditGroupControler.php

### メソッド
- PUT

### リクエストパラメータ
- グループID ※
- グループ名
- 詳細
- グループ色
- 作品ID ※
- 時系列ID ※
- ユーザID ※
- バージョン ※

### 処理内容
グループIDとバージョンが一致するグループ情報を入力内容に変更する（結果コード：000）
※ NULL値は変更しない

### 返却値
- 結果コード
- メッセージ

-----------------------------------------------------------

# グループ削除

### ファイル名
- DeleteGroupControler.php

### メソッド
- DELETE

### リクエストパラメータ
- グループID ※
- 作品ID ※
- 時系列ID ※
- ユーザID ※
- バージョン ※

### 処理内容

グループIDを使用している登場人物情報の登場人物IDを使用している関係情報を削除する。
グループIDを使用している登場人物情報を削除する 
グループIDとバージョンが一致するグループ情報を削除する（結果コード：000）

### 返却値
- 結果コード
- メッセージ

-----------------------------------------------------------

# 作品全検索

### ファイル名
- SearchAllOpusControler.php

### メソッド
- GET

### リクエストパラメータ
- なし

### 処理内容
作品情報を全検索する（結果コード：000）

### 返却値
- 結果コード
- メッセージ
- オプション
    - 作品情報リスト

-----------------------------------------------------------

# 作品検索

### ファイル名
- SearchOpusControler.php

### メソッド
- GET

### リクエストパラメータ
- 作品ID
- 作品名
- ユーザID ※

### 処理内容
ユーザIDから作品情報を検索する（結果コード：000）
作品ID、作品名から作品情報の絞り込みができる
※ NULL値は絞り込まない

### 返却値
- 結果コード
- メッセージ
- オプション
    - 作品情報リスト

-----------------------------------------------------------

# 作品登録

### ファイル名
- CreateOpusControler.php

### メソッド
- POST

### リクエストパラメータ
- 作品名 ※
- ユーザID ※

### 処理内容
作品IDを発行し、DBに登録する（結果コード：000）

### 返却値
- 結果コード

-----------------------------------------------------------

# 作品編集

### ファイル名
- EditOpusControler.php

### メソッド
- PUT

### リクエストパラメータ
- 作品ID ※
- 作品名
- ユーザID ※
- バージョン ※

### 処理内容
作品IDとバージョンが一致する作品情報を入力内容に変更する（結果コード：000）
※ NULL値は変更しない

### 返却値
- 結果コード
- メッセージ

-----------------------------------------------------------

# 作品削除

### ファイル名
- DeleteOpusControler.php

### メソッド
- DELETE

### リクエストパラメータ
- 作品ID ※
- ユーザID ※
- バージョン ※

### 処理内容

作品IDを使用している関係情報を削除する。
作品IDを使用している登場人物情報を削除する 。
作品IDを使用しているグループ情報を削除する 。
作品IDを使用している時系列情報を削除する 。
作品IDを使用している関係性情報を削除する 。
作品IDとバージョンが一致する作品情報を削除する（結果コード：000）

### 返却値
- 結果コード
- メッセージ

-----------------------------------------------------------

# ユーザ編集

### ファイル名
- EditAccountControler.php

### メソッド
- PUT

### リクエストパラメータ
- ユーザID ※
- ユーザ名
- パスワード
- バージョン ※

### 処理内容
ユーザIDとバージョンが一致するユーザ情報を入力内容に変更する（結果コード：000）
※ NULL値は変更しない

### 返却値
- 結果コード
- メッセージ

-----------------------------------------------------------

# ユーザ削除

### ファイル名
- DeleteAccountControler.php

### メソッド
- DELETE

### リクエストパラメータ
- 作品ID ※
- ユーザID ※
- バージョン ※

### 処理内容

ユーザIDを使用している関係情報を削除する。
ユーザIDを使用している登場人物情報を削除する 。
ユーザIDを使用しているグループ情報を削除する 。
ユーザIDを使用している時系列情報を削除する 。
ユーザIDを使用している関係性情報を削除する 。
ユーザIDを使用している作品情報を削除する 。
ユーザIDとバージョンが一致するユーザ情報を削除する（結果コード：000）

### 返却値
- 結果コード
- メッセージ

-----------------------------------------------------------

# グラフ検索

### ファイル名
- SearchGraphControler.php

### メソッド
- GET

### リクエストパラメータ
- 時系列ID ※
- 作品ID ※

### 処理内容
作品ID、時系列IDから時系別に登場人物情報と関係情報を検索する（結果コード：000）

### 返却値
- 結果コード
- メッセージ
- オプション
    - nodes
        - 登場人物情報リスト
    - links
        - 関係情報リスト

-----------------------------------------------------------

# グラフ登録

### ファイル名
- CreateGraphControler.php

### メソッド
- POST

### リクエストパラメータ
- グラフ情報
    - nodes
        - 登場人物情報リスト
    - links
        - 関係情報リスト

### 処理内容
グラフ情報から時系情報、登場人物情報、関係情報、関係性情報を登録する（結果コード：000）

### 返却値
- 結果コード
- メッセージ

-----------------------------------------------------------

