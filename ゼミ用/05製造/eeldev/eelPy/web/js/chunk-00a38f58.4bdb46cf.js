(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00a38f58"],{5969:function(t,s,e){"use strict";e.d(s,"a",(function(){return o}));var a=e("d4ec"),i=e("ade3"),o=function t(){Object(a["a"])(this,t)};Object(i["a"])(o,"OPUS_LIST_MAX",20),Object(i["a"])(o,"OPUS_LIST_PAGE",5),Object(i["a"])(o,"USER_ID_STR","user"),Object(i["a"])(o,"USER_ID_DIGIT",6),Object(i["a"])(o,"USER_ID_LENGTH",o.USER_ID_STR.length+o.USER_ID_DIGIT),Object(i["a"])(o,"ACTOR_ID_STR","actor"),Object(i["a"])(o,"ACTOR_ID_DIGIT",3),Object(i["a"])(o,"ACTOR_ID_LENGTH",o.ACTOR_ID_STR.length+o.ACTOR_ID_DIGIT),Object(i["a"])(o,"TIME_ID_STR","time"),Object(i["a"])(o,"TIME_ID_DIGIT",4),Object(i["a"])(o,"TIME_ID_LENGTH",o.TIME_ID_STR.length+o.TIME_ID_DIGIT),Object(i["a"])(o,"REL_ID_STR","rel"),Object(i["a"])(o,"REL_ID_DIGIT",6),Object(i["a"])(o,"REL_ID_LENGTH",o.REL_ID_STR.length+o.REL_ID_DIGIT),Object(i["a"])(o,"REL_MST_ID_STR","relmst"),Object(i["a"])(o,"REL_MST_ID_DIGIT",4),Object(i["a"])(o,"REL_MST_ID_LENGTH",o.REL_MST_ID_STR.length+o.REL_MST_ID_DIGIT),Object(i["a"])(o,"GROUP_ID_STR","group"),Object(i["a"])(o,"GROUP_ID_DIGIT",4),Object(i["a"])(o,"GROUP_ID_LENGTH",o.GROUP_ID_STR.length+o.GROUP_ID_DIGIT),Object(i["a"])(o,"OPUS_ID_STR","opus"),Object(i["a"])(o,"OPUS_ID_DIGIT",4),Object(i["a"])(o,"OPUS_ID_LENGTH",o.OPUS_ID_STR.length+o.OPUS_ID_DIGIT)},ae3e:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"row"},[e("aside",{staticClass:"col-12"},[e("b-navbar",{attrs:{toggleable:"",type:"dark",variant:"dark"}},[e("b-navbar-brand",[t._v(" 相関図制作システム ")]),e("b-navbar-brand",[e("b-button",{attrs:{variant:"success"},on:{click:function(s){t.isListUploadModal=!0}}},[t._v("投稿する "),e("font-awesome-icon",{attrs:{icon:"upload"}})],1),e("b-dropdown",{attrs:{right:"","toggle-class":"text-decoration-none","no-caret":""},scopedSlots:t._u([{key:"button-content",fn:function(){return[e("font-awesome-icon",{attrs:{icon:"cog"}})]},proxy:!0}])},[e("b-dropdown-item",[e("router-link",{attrs:{to:{name:t.graphSubmit}}},[t._v("投稿画面へ ")])],1),e("b-dropdown-item",{attrs:{variant:"danger"},on:{click:function(s){t.isLogoutCheckModal=!0}}},[t._v("ログアウト")])],1)],1)],1)],1),e("aside",{staticClass:"col-sm-0 col-md-2 col-lg-2 col-xl-2"}),e("aside",{staticClass:"col-sm-12 col-md-8 col-lg-8 col-xl-8"},[e("div",{staticClass:"card"},[e("article",{staticClass:"card-body"},[e("h4",{staticClass:"card-title text-center mb-4 mt-1"},[t._v("相関図一覧")]),e("hr"),e("br"),t._l(t.successMsgList,(function(s,a){return e("div",{key:a},[e("b-alert",{attrs:{show:"",variant:"success"}},[t._v(" "+t._s(s)+" ")])],1)})),t._l(t.dangerMsgList,(function(s,a){return e("div",{key:a},[e("b-alert",{attrs:{show:"",variant:"danger"}},[t._v(" "+t._s(s)+" ")])],1)})),e("br")],2),e("b-container",{attrs:{fluid:""}},[e("b-row",{staticClass:"my-1"},[e("b-col",{attrs:{sm:"2"}},[e("label",{staticClass:"mb-4 mt-1"},[t._v("作品名：")])]),e("b-col",{attrs:{sm:"8"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.createOpus.opusName,expression:"createOpus.opusName"}],staticClass:"form-control",class:[t.createOpus.opusNameValid],attrs:{placeholder:"作品名を入力してください。",type:"text",name:"edit_actor_name"},domProps:{value:t.createOpus.opusName},on:{input:function(s){s.target.composing||t.$set(t.createOpus,"opusName",s.target.value)}}})]),e("b-col",{attrs:{sm:"2"}},[e("b-button",{attrs:{variant:"info"},on:{click:function(s){return t.createOpusApi()}}},[t._v(" 追加 ")])],1)],1)],1),e("table",{staticClass:"table"},[t._m(0),e("tbody",t._l(t.opusList,(function(s,a){return e("tr",{key:a,style:1==s.opus_flg?"background-color: #ffa500;":""},[e("td",[t._v(t._s(s.opus_name))]),e("td",[e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.isEditOpusModalOpen(s.opus_id,s.opus_name,s.opus_flg,s.version)}}},[e("font-awesome-icon",{attrs:{icon:"pencil-alt"}})],1)]),e("td",[e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.isDeleteOpusModalOpen(s.opus_id,s.version)}}},[e("font-awesome-icon",{attrs:{icon:"times"}})],1)]),e("td",[e("router-link",{attrs:{to:{path:t.graphCreate+"/"+s.opus_id}}},[e("button",{staticClass:"btn btn-info",attrs:{type:"button"}},[e("font-awesome-icon",{attrs:{icon:"eye"}})],1)])],1)])})),0)]),e("br"),e("article",{staticClass:"card-body"},[0!=t.searchOpus.min?e("div",{staticClass:"btn-group"},[e("button",{staticClass:"btn btn-secondary",class:[t.searchOpus.min===t.searchOpus.current?"btn-secondary active":"btn-secondary"],attrs:{type:"button"},on:{click:function(s){return t.searchOpusApi(t.searchOpus.min)}}},[t._v(" "+t._s(t.searchOpus.min)+" ")]),t._v(" ... ")]):t._e(),t._l(t.searchOpus.btnloop,(function(s){return e("div",{key:s,staticClass:"btn-group"},[e("button",{staticClass:"btn btn-secondary",class:[s+t.searchOpus.addpage===t.searchOpus.current?"btn-secondary active":"btn-secondary"],attrs:{type:"button"},on:{click:function(e){return t.searchOpusApi(s+t.searchOpus.addpage)}}},[t._v(" "+t._s(s+t.searchOpus.addpage)+" ")])])})),0!=t.searchOpus.max?e("div",{staticClass:"btn-group"},[t._v(" ... "),e("button",{staticClass:"btn btn-secondary",class:[t.searchOpus.max===t.searchOpus.current?"btn-secondary active":"btn-secondary"],attrs:{type:"button"},on:{click:function(s){return t.searchOpusApi(t.searchOpus.max)}}},[t._v(" "+t._s(t.searchOpus.max)+" ")])]):t._e()],2)],1)]),e("b-modal",{attrs:{title:"確認画面"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[e("b-button",{staticClass:"float-right",attrs:{variant:"secondary",size:"sm"},on:{click:function(s){t.isListUploadModal=!1}}},[t._v(" 閉じる ")]),e("b-button",{staticClass:"float-right",attrs:{variant:"primary",size:"sm"},on:{click:function(s){return t.uploadListApi()}}},[t._v(" 投稿する ")])]},proxy:!0}]),model:{value:t.isListUploadModal,callback:function(s){t.isListUploadModal=s},expression:"isListUploadModal"}},[e("b-container",{attrs:{fluid:""}},[e("p",{staticClass:"my-4"},[t._v("投稿する相関図を選択してください。")]),e("table",{staticClass:"table"},[e("thead",{staticClass:"thead-light"},[e("tr",[e("th",[t._v("選択")]),e("th",[t._v("作品名")])])]),e("tbody",t._l(t.opusList,(function(s,a){return e("tr",{key:a},[e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.uploadList,expression:"uploadList"}],attrs:{type:"checkbox",size:"lg"},domProps:{value:s,checked:Array.isArray(t.uploadList)?t._i(t.uploadList,s)>-1:t.uploadList},on:{change:function(e){var a=t.uploadList,i=e.target,o=!!i.checked;if(Array.isArray(a)){var n=s,r=t._i(a,n);i.checked?r<0&&(t.uploadList=a.concat([n])):r>-1&&(t.uploadList=a.slice(0,r).concat(a.slice(r+1)))}else t.uploadList=o}}})]),e("td",[t._v(t._s(s.opus_name))])])})),0)])])],1),e("b-modal",{attrs:{title:"確認画面"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[e("b-button",{staticClass:"float-right",attrs:{variant:"secondary",size:"sm"},on:{click:function(s){t.isLogoutCheckModal=!1}}},[t._v(" 閉じる ")]),e("b-button",{staticClass:"float-right",attrs:{variant:"danger",size:"sm"},on:{click:function(s){return t.logout()}}},[t._v(" ログアウト ")])]},proxy:!0}]),model:{value:t.isLogoutCheckModal,callback:function(s){t.isLogoutCheckModal=s},expression:"isLogoutCheckModal"}},[e("b-container",{attrs:{fluid:""}},[e("p",{staticClass:"my-4"},[t._v("ログアウトしますか？")])])],1),e("b-modal",{attrs:{title:"編集画面"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[e("b-button",{staticClass:"float-right",attrs:{variant:"secondary",size:"sm"},on:{click:function(s){t.isEditOpusModal=!1}}},[t._v(" 閉じる ")]),e("b-button",{staticClass:"float-right",attrs:{variant:"success",size:"sm"},on:{click:function(s){return t.editOpusApi()}}},[t._v(" 更新 ")])]},proxy:!0}]),model:{value:t.isEditOpusModal,callback:function(s){t.isEditOpusModal=s},expression:"isEditOpusModal"}},[e("b-container",{attrs:{fluid:""}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.editOpus.opusId,expression:"editOpus.opusId"}],attrs:{type:"hidden"},domProps:{value:t.editOpus.opusId},on:{input:function(s){s.target.composing||t.$set(t.editOpus,"opusId",s.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.editOpus.version,expression:"editOpus.version"}],attrs:{type:"hidden"},domProps:{value:t.editOpus.version},on:{input:function(s){s.target.composing||t.$set(t.editOpus,"version",s.target.value)}}}),e("b-row",{staticClass:"mb-1"},[e("b-col",{attrs:{cols:"3"}},[t._v("作品名")]),e("b-col",[e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.editOpus.opusName,expression:"editOpus.opusName"}],staticClass:"form-control",class:[t.editOpus.opusNameValid],attrs:{placeholder:"作品名を入力してください。",type:"text",name:"edit_list_name"},domProps:{value:t.editOpus.opusName},on:{input:function(s){s.target.composing||t.$set(t.editOpus,"opusName",s.target.value)}}})])])],1),e("b-row",{staticClass:"mb-1"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.editOpus.opusId,expression:"editOpus.opusId"}],attrs:{type:"hidden"},domProps:{value:t.editOpus.opusId},on:{input:function(s){s.target.composing||t.$set(t.editOpus,"opusId",s.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.editOpus.version,expression:"editOpus.version"}],attrs:{type:"hidden"},domProps:{value:t.editOpus.version},on:{input:function(s){s.target.composing||t.$set(t.editOpus,"version",s.target.value)}}}),e("b-col",{attrs:{cols:"3"}},[t._v("投稿状態")]),e("b-col",[e("div",{staticClass:"input-group"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.editOpus.opusFlg,expression:"editOpus.opusFlg"}],class:[t.editOpus.opusFlgValid],on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.$set(t.editOpus,"opusFlg",s.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"1"}},[t._v("投稿中")]),e("option",{attrs:{value:"0"}},[t._v("編集中")])])])])],1)],1)],1),e("b-modal",{attrs:{title:"確認画面"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[e("b-button",{staticClass:"float-right",attrs:{variant:"secondary",size:"sm"},on:{click:function(s){t.isDeleteOpusModal=!1}}},[t._v(" 閉じる ")]),e("b-button",{staticClass:"float-right",attrs:{variant:"danger",size:"sm"},on:{click:function(s){return t.deleteOpusApi()}}},[t._v(" 削除 ")])]},proxy:!0}]),model:{value:t.isDeleteOpusModal,callback:function(s){t.isDeleteOpusModal=s},expression:"isDeleteOpusModal"}},[e("b-container",{attrs:{fluid:""}},[e("p",{staticClass:"my-4"},[t._v("データを削除しますか？")])])],1)],1)},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("thead",{staticClass:"thead-light"},[e("tr",[e("th",[t._v("作品名")]),e("th",[t._v("編集")]),e("th",[t._v("削除")]),e("th",[t._v("閲覧")])])])}],o=e("b85c"),n=e("1da1"),r=(e("96cf"),e("3849")),u=e("e74e"),c=e("244f"),p=e("5969"),l={data:function(){return{opusList:[],successMsgList:[],dangerMsgList:[],uploadList:[],searchOpus:{current:1,offset:0,limit:p["a"].OPUS_LIST_MAX,btnloop:0,min:0,max:0,addpage:0},createOpus:{opusName:"",opusNameValid:""},editOpus:{opusId:"",opusName:"",opusFlg:"",version:0,opusNameValid:"",opusFlgValid:""},deleteOpus:{opusId:"",version:0,opusIdValid:""},graphSubmit:c["a"].graphSubmit,graphCreate:c["a"].graphCreate,isLogoutCheckModal:!1,isListUploadModal:!1,isEditOpusModal:!1,isDeleteOpusModal:!1}},beforeRouteEnter:function(t,s,e){e((function(t){t.initialize(),e()}))},methods:{initialize:function(){var t=this,s={user_id:this.$store.getters.getUserId,token:this.$store.getters.getToken,offset:this.searchOpus.offset,limit:this.searchOpus.limit};this.$http.get(r["a"].SEARCH_OPUS,{params:s}).then((function(s){t.opusList=s.data.optional;var e={user_id:t.$store.getters.getUserId,token:t.$store.getters.getToken,offset:0,limit:9999};t.$http.get(r["a"].SEARCH_OPUS,{params:e}).then((function(s){t.searchOpus.addpage=0,t.searchOpus.btnloop=s.data.optional.length>p["a"].OPUS_LIST_MAX?Math.floor((s.data.optional.length-1)/p["a"].OPUS_LIST_MAX)+1:1,t.searchOpus.btnloop>p["a"].OPUS_LIST_PAGE&&(t.searchOpus.max=0,t.searchOpus.min=0,t.searchOpus.btnloop<t.searchOpus.current+p["a"].OPUS_LIST_PAGE?(t.searchOpus.addpage=t.searchOpus.btnloop-p["a"].OPUS_LIST_PAGE-1,t.searchOpus.btnloop=p["a"].OPUS_LIST_PAGE+1):(t.searchOpus.max=t.searchOpus.btnloop,t.searchOpus.addpage=t.searchOpus.current-1,t.searchOpus.btnloop=p["a"].OPUS_LIST_PAGE),1!=t.searchOpus.current&&(t.searchOpus.min=1))})).catch((function(s){t.dangerMsgList=s.response.data.msg}))})).catch((function(s){t.dangerMsgList=s.response.data.msg}))},uploadListApi:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var e,a,i,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:e=Object(o["a"])(t.uploadList),s.prev=1,e.s();case 3:if((a=e.n()).done){s.next=10;break}return i=a.value,n={opus_id:i.opus_id,opus_flg:1,version:i.version,user_id:t.$store.getters.getUserId,token:t.$store.getters.getToken},s.next=8,t.$http.put(r["a"].EDIT_OPUS,n).then((function(t){})).catch((function(s){t.dangerMsgList=s.response.data.msg}));case 8:s.next=3;break;case 10:s.next=15;break;case 12:s.prev=12,s.t0=s["catch"](1),e.e(s.t0);case 15:return s.prev=15,e.f(),s.finish(15);case 18:t.successMsgList=["作品を投稿しました。"],t.initialize(),t.isListUploadModal=!1;case 21:case"end":return s.stop()}}),s,null,[[1,12,15,18]])})))()},searchOpusApi:function(t){this.searchOpus.current=t,this.searchOpus.offset=(t-1)*p["a"].OPUS_LIST_MAX,this.initialize()},createOpusApi:function(){var t=this,s={user_id:this.$store.getters.getUserId,token:this.$store.getters.getToken,opus_name:this.createOpus.opusName};if(this.createOpusValidation(s))throw"バリデーションエラー";this.$http.post(r["a"].CREATE_OPUS,s).then((function(s){t.initialize(),t.successMsgList=["作品を登録しました。"]})).catch((function(s){t.dangerMsgList=s.response.data.msg}))},editOpusApi:function(){var t=this,s={opus_id:this.editOpus.opusId,opus_name:this.editOpus.opusName,opus_flg:this.editOpus.opusFlg,version:this.editOpus.version,user_id:this.$store.getters.getUserId,token:this.$store.getters.getToken};if(this.editOpusValidation(s))throw"バリデーションエラー";this.$http.put(r["a"].EDIT_OPUS,s).then((function(s){t.initialize(),t.isEditOpusModal=!1,t.successMsgList=["作品を更新しました。"]})).catch((function(s){t.dangerMsgList=s.response.data.msg}))},deleteOpusApi:function(){var t=this,s={opus_id:this.deleteOpus.opusId,user_id:this.$store.getters.getUserId,token:this.$store.getters.getToken};this.$http.post(r["a"].DELETE_OPUS,s).then((function(s){t.initialize(),t.isDeleteOpusModal=!1,t.successMsgList=["作品を削除しました。"]})).catch((function(s){t.dangerMsgList=s.response.data.msg}))},isEditOpusModalOpen:function(t,s,e,a){this.editOpus.opusId=t,this.editOpus.opusName=s,this.editOpus.opusFlg=e,this.editOpus.version=a,this.isEditOpusModal=!0},isDeleteOpusModalOpen:function(t,s){this.deleteOpus.opusId=t,this.deleteOpus.version=s,this.isDeleteOpusModal=!0},createOpusValidation:function(t){var s=!1;return this.successMsgList=[],this.dangerMsgList=[],this.createOpus.opusNameValid="",u["a"].eq(t.opus_name,"")&&(this.dangerMsgList.push("作品名は必須項目です。"),this.createOpus.opusNameValid="is-invalid",s=!0),(t.opus_name.length<1||100<t.opus_name.length)&&(this.dangerMsgList.push("作品名は1から100文字以内で入力してください。"),this.createOpus.opusNameValid="is-invalid",s=!0),s},editOpusValidation:function(t){var s=!1;return this.successMsgList=[],this.dangerMsgList=[],this.editOpus.opusNameValid="",u["a"].eq(t.opus_name,"")&&(this.dangerMsgList.push("作品名は必須項目です。"),this.editOpus.opusNameValid="is-invalid",s=!0),(t.opus_name.length<1||100<t.opus_name.length)&&(this.dangerMsgList.push("作品名は1から100文字以内で入力してください。"),this.editOpus.opusNameValid="is-invalid",s=!0),s},logout:function(){var t=this,s={user_id:this.$store.getters.getUserId};this.$http.get(r["a"].LOGOUT,{params:s}).then((function(s){t.$router.push({name:c["a"].login})})).catch((function(s){t.dangerMsgList=s.response.data.msg}))}}},d=l,_=e("2877"),h=Object(_["a"])(d,a,i,!1,null,null,null);s["default"]=h.exports}}]);
//# sourceMappingURL=chunk-00a38f58.4bdb46cf.js.map